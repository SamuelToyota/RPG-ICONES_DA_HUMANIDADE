{% load static %}
<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Protocolo Hero | Seleção</title>
    <link rel="stylesheet" href="{% static 'core/style.css' %}">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap" rel="stylesheet">
    <style>
        .character-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 25px;
            padding: 20px;
        }

        /* O design original com borda chanfrada azul */
        .character-card {
            background: #0a0c10;
            border-left: 4px solid #00a2ff;
            clip-path: polygon(0% 0%, 100% 0%, 100% 85%, 85% 100%, 0% 100%);
            padding: 20px;
            position: relative;
            border: 1px solid #1a1d23;
        }

        .card-header {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
        }

        .photo-frame {
            width: 80px;
            height: 80px;
            background: #151921;
            border: 2px solid #333;
            overflow: hidden;
        }

        .photo-frame img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .hero-info h3 {
            margin: 0;
            font-family: 'Orbitron';
            text-transform: uppercase;
            color: #fff;
        }

        .hero-class {
            font-size: 0.7rem;
            color: #888;
            letter-spacing: 2px;
        }

        /* Barras estilizadas conforme pedido */
        .stat-container { margin-bottom: 12px; }
        .stat-label {
            display: flex;
            justify-content: space-between;
            font-size: 0.65rem;
            font-family: 'Orbitron';
            margin-bottom: 5px;
        }

        .bar-bg {
            width: 100%;
            height: 10px;
            background: #111;
            border: 1px solid #222;
        }

        .fill-vida { background: #ff4d4d; box-shadow: 0 0 10px #ff4d4d; }
        .fill-esforco { background: #00a2ff; box-shadow: 0 0 10px #00a2ff; }
        .fill-defesa { background: #9d4edd; box-shadow: 0 0 10px #9d4edd; }

        .btn-view {
            display: block;
            margin-top: 15px;
            text-align: center;
            background: #1a1d23;
            color: #00a2ff;
            text-decoration: none;
            font-family: 'Orbitron';
            font-size: 0.7rem;
            padding: 8px;
            border: 1px solid #00a2ff;
            transition: 0.3s;
        }

        .btn-view:hover {
            background: #00a2ff;
            color: #000;
        }

        .lvl-badge {
            position: absolute;
            top: 10px; right: 10px;
            background: #f1c40f;
            color: #000;
            padding: 2px 8px;
            font-size: 0.6rem;
            font-weight: bold;
            font-family: 'Orbitron';
        }
    </style>
</head>
<body class="container">

<header style="padding: 40px 20px; border-bottom: 1px solid #333; display: flex; justify-content: space-between;">
    <h1 style="font-family: 'Orbitron'; color: #00a2ff;">ICONES DA HUMANIDADE <small style="color: #555; font-size: 0.5em;">a ultima linha de defesa planetária</small></h1>
    <a href="{% url 'character_create' %}" class="btn">NOVO RECRUTA</a>
</header>

<main class="character-grid">
    {% for character in characters %}
    <div class="character-card">
        <div class="lvl-badge">LVL {{ character.nivel }}</div>

        <div class="card-header">
            <div class="photo-frame">
                {% if character.foto %}
                    <img src="{{ character.foto.url }}" alt="Herói">
                {% else %}
                    <img src="{% static 'images/default_hero.png' %}" alt="Padrão">
                {% endif %}
            </div>
            <div class="hero-info">
                <div class="hero-class">{{ character.get_classe_display }}</div>
                <h3>{{ character.nome_do_heroi }}</h3>
                <div style="font-size: 0.6rem; color: #555;">ID: @{{ character.nome_do_jogador }}</div>
            </div>
        </div>

        <div class="stat-container">
            <div class="stat-label" style="color: #ff4d4d;"><span>INTEGRIDADE</span> <span>{{ character.vida }}%</span></div>
            <div class="bar-bg"><div class="bar-fill fill-vida" style="width: {{ character.vida }}%; height: 100%;"></div></div>
        </div>

        <div class="stat-container">
            <div class="stat-label" style="color: #00a2ff;"><span>ESFORÇO</span> <span>{{ character.esforco }}%</span></div>
            <div class="bar-bg"><div class="bar-fill fill-esforco" style="width: {{ character.esforco }}%; height: 100%;"></div></div>
        </div>

        <div class="stat-container">
            <div class="stat-label" style="color: #9d4edd;"><span>DEFESA / ESQUIVA</span> <span>{{ character.defesa_esquiva }} / 50</span></div>
            <div class="bar-bg"><div class="bar-fill fill-defesa" style="width: {% widthratio character.defesa_esquiva 50 100 %}%; height: 100%;"></div></div>
        </div>

        <a href="{% url 'character_detail' character.pk %}" class="btn-view">ACESSAR ARQUIVO</a>
    </div>
    {% endfor %}
</main>

</body>
</html>